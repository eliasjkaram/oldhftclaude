version: '3.8'
services:
  hft-master:
    build: .
    ports: ['5555:5555']
    environment:
      - NODE_TYPE=master
      - GPU_ENABLED=true
  hft-scanner-1:
    build: .
    ports: ['5556:5556']
    environment:
      - NODE_TYPE=scanner
      - NODE_ID=1
      - MASTER_HOST=hft-master
  hft-scanner-2:
    build: .
    ports: ['5557:5557']
    environment:
      - NODE_TYPE=scanner
      - NODE_ID=2
      - MASTER_HOST=hft-master
  hft-executor:
    build: .
    ports: ['5560:5560']
    environment:
      - NODE_TYPE=executor
      - MASTER_HOST=hft-master
  redis:
    image: redis:alpine
    ports: ['6379:6379']
  prometheus:
    image: prom/prometheus
    ports: ['9090:9090']
  grafana:
    image: grafana/grafana
    ports: ['3000:3000']
